---
title: Layouts & Themes
---

```{r setup, include = FALSE}
# Load shiny
library(shiny)
# Load tidyverse
library(tidyverse)
# Define empty server function
server <- function(input, output, session) {

}
if (requireNamespace('rstudioapi', quietly = TRUE)){
  options(shiny.launch.browser = rstudioapi::viewer)
}
```

## Layouts

Let's learn about layout functions that allow inputs and outputs to be visually
arranged (or "laid" out) in the UI. A well chosen layout makes a Shiny app
aesthetically more appealing, easier to navigate, and more user-friendly.

### `sidebarLayout`

![sidebar-layout](img/sidebar-layout.png)

```{r}
ui <- fluidPage(
  titlePanel("Title"),
  sidebarLayout(
    sidebarPanel('Sidebar'),
    mainPanel('Main')
  )
)
shinyApp(ui, server)
```

### `tabsetPanel`

![tabset-panel](img/tabset-panel.png)

```{r}
ui <- fluidPage(
  titlePanel('Title'),
  sidebarLayout(
    sidebarPanel('Sidebar'),
    mainPanel(
      tabsetPanel(
        tabPanel("Tab 1"),
        tabPanel("Tab 2")
      )
    )
  )
)
shinyApp(ui, server)
```


## Apply Layout

```{r}
ui <- fluidPage(
  # Display a title panel with the name of the app
  titlePanel("Baby Names Explorer"),
  # Display a text input to get user name
  sidebarLayout(
    sidebarPanel(
      textInput('name', 'Enter Name')
    ),
    mainPanel(
      # Display a plot output of the trends
      tabsetPanel(
        tabPanel(plotOutput('plot')),
        tabPanel(DT::DTOutput('table'))
      )
    )
  )
)

server <- function(input, output, session) {
  # Render a plot showing trend in name across years
  output$plot <- renderPlot({
    babynames %>% 
      filter(name == !!input$name) %>% 
      ggplot(aes(x = year, y = n, color = sex)) +
      geom_line()
  })
  # Render an interactive table showing trend in name across years
  output$table <- DT::renderDT({
    babynames %>% 
      filter(name == !!input$name)
  })
}

shinyApp(ui, server)
```

### `navbarPage`

![navbar-page](img/navbar-page.png)

```{r}
ui <- navbarPage(
  "App Title",
  tabPanel("Page 1"),
  tabPanel("Page 2"),
  tabPanel("Page 3")
)
shinyApp(ui, server)
```

## Themes

In addition to layouts, the `shinythemes` package allows you to make use of 
pre-built themes that allow you to change the color scheme and typography of 
your app. You can use the `themeSelector()` function to experiment with 
different themes, and then set `theme = shinythemes::shinytheme(theme = '___')`
to choose a desired theme.

![theme-selector](img/theme-selector.png)

```{r}
ui <- fluidPage(
  titlePanel("Baby Names Explorer"),
  shinythemes::themeSelector(),
  sidebarLayout(
    sidebarPanel(
      textInput('name', 'Enter Name')
    ),
    mainPanel(
      tabsetPanel(
        tabPanel('Plot', plotOutput('plot')),
        tabPanel('Table', DT::DTOutput('table'))
      )
    )
  )
)
server <- function(input, output, session) {
  rval_names <- reactive({
    user_name <- input$name
    req(user_name)
    babynames %>% 
      filter(name == user_name)
  })
  output$plot <- renderPlot({
    rval_names() %>% 
      ggplot(aes(x = year, y = n, color = sex)) +
      geom_line()
  })
  output$table <- DT::renderDT({
    rval_names()
  })
}
shinyApp(ui, server)
```

